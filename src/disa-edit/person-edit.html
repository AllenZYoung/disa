<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="person-edit">
  <template>
    <style>
      :host {
        display: block;
      }

      *:not(paper-button):not(paper-listbox) {
        width: 100%;
      }

      paper-dropdown-menu {
        --paper-dropdown-menu-button: {
          left: 0;
          width: 100%;
        }
      }

      paper-listbox {
        --paper-listbox: {
          width: 300px;
          overflow: hidden;
        }
      }

      iron-dropdown {
        left:0 !important;
        width:100% !important;
      }
      

    </style>

    <h2>Person Detail</h2>

    <h3>Name(s)</h3>
    <template is="dom-repeat" items="[[person.names]]">
      <paper-input name="firstName[]" label="First Name" value="{{item.firstName}}"></paper-input>
      <paper-input name="lastName[]" label="Last Name" value="{{item.lastName}}"></paper-input>
      <paper-dropdown-menu label="Type" selected-item="{{nameType}}" selected-item-label="{{selectedNameType}}">
        <paper-listbox slot="dropdown-content" selected="[[__indexOf(item.type, 'nameType', options)]]">
          <template is="dom-repeat" items="[[__getSortedOptions('nameType', options)]]">
            <paper-item value="[[item]]">[[item]]</paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <input name="nameType[]" type="hidden" value$="[[nameType.value]]" />

      <paper-button on-click="removeName" data-property="names" data-index="[[index]]" raised>Remove Name</paper-button>
    </template>
    <p><paper-button raised on-click="addName">Add Name</paper-button></p>
    <br>

    <h3>Biographical</h3>
    <paper-dropdown-menu label="Tribe" selected-item="{{tribe}}" selected-item-label="{{selectedTribe}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.tribe, 'tribe', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('tribe', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="tribe" type="hidden" value$="[[tribe.value]]" />
    <br>

    <paper-dropdown-menu label="Origin" selected-item="{{origin}}" selected-item-label="{{selectedOrigin}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.origin, 'origin', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('origin', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="origin" type="hidden" value$="[[origin.value]]" />
    <br>  
  
    <paper-dropdown-menu label="Race" selected-item="{{race}}" selected-item-label="{{selectedRace}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.race, 'race', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('race', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="race" type="hidden" value$="[[race.value]]" />
    <br>

    <paper-dropdown-menu label="Sex" selected-item="{{sex}}" selected-item-label="{{selectedSex}}">
      <paper-listbox slot="dropdown-content" selected="{{__indexOf(person.sex, 'sex', options)}}">
        <template is="dom-repeat" items="{{__getSortedOptions('sex', options)}}">
          <paper-item value="{{item}}">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="sex" type="hidden" value$="{{sex.value}}" />

    <paper-input name="age" label="Age" value="[[person.age]]"></paper-input>

    <paper-dropdown-menu label="Vocation" selected-item="{{vocation}}" selected-item-label="{{selectedVocation}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.vocation, 'vocation', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('vocation', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="vocation" type="hidden" value$="[[vocation.value]]" />

    <paper-dropdown-menu label="Type/Kind of Enslavement" selected-item="{{typeKindOfEnslavement}}" selected-item-label="{{selectedTypeKindOfEnslavement}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.typeKindOfEnslavement, 'typeKindOfEnslavement', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('typeKindOfEnslavement', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="typeKindOfEnslavement" type="hidden" value$="[[typeKindOfEnslavement.value]]" />

    <h3>Father</h3>
    <paper-input name="fatherFirstName" label="First Name" value="{{person.father.name.firstName}}"></paper-input>
    <paper-input name="fatherLastName" label="Last Name" value="{{person.father.name.lastName}}"></paper-input>

    <paper-dropdown-menu label="Origin" selected-item="{{fatherOrigin}}" selected-item-label="{{selectedFatherOrigin}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.father.origin, 'origin', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('origin', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="fatherOrigin" type="hidden" value$="[[origin.value]]" />
    <br>

    <paper-dropdown-menu label="Race" selected-item="{{fatherRace}}" selected-item-label="{{selectedFatherRace}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.father.race, 'race', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('race', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="fatherRace" type="hidden" value$="[[fatherRace.value]]" />
    <br>

    <paper-dropdown-menu label="Status" selected-item="{{fatherStatus}}" selected-item-label="{{selectedFatherStatus}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.father.status, 'status', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('status', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="fatherStatus" type="hidden" value$="[[fatherStatus.value]]" />
    <br>

    <h4>Father's Owner</h4>
    <paper-dropdown-menu label="Title" selected-item="{{fatherOwnerTitle}}" selected-item-label="{{selectedFatherOwnerTitle}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.father.owner.name.title, 'title', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('title', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="fatherOwnerTitle" type="hidden" value$="[[fatherOwnerTitle.value]]" />
    <paper-input name="fatherOwnerFirstName" label="First Name" value="{{person.father.owner.name.firstName}}"></paper-input>
    <paper-input name="fatherOwnerLastName" label="Last Name" value="{{person.father.owner.name.lastName}}"></paper-input>

    <paper-dropdown-menu label="Owner Vocation" selected-item="{{fatherOwnerVocation}}" selected-item-label="{{selectedFatherOwnerVocation}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.father.owner.vocation, 'ownerVocation', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('ownerVocation', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="fatherOwnerVocation" type="hidden" value$="[[fatherOwnerVocation.value]]" />

    <h3>Mother</h3>
    <paper-input name="motherFirstName" label="First Name" value="{{person.mother.name.firstName}}"></paper-input>
    <paper-input name="motherLastName" label="Last Name" value="{{person.mother.name.lastName}}"></paper-input>

    <paper-dropdown-menu label="Origin" selected-item="{{motherOrigin}}" selected-item-label="{{selectedMotherOrigin}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.mother.origin, 'origin', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('origin', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="motherOrigin" type="hidden" value$="[[origin.value]]" />
    <br>

    <paper-dropdown-menu label="Race" selected-item="{{motherRace}}" selected-item-label="{{selectedMotherRace}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.mother.race, 'race', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('race', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="motherRace" type="hidden" value$="[[motherRace.value]]" />
    <br>

    <paper-dropdown-menu label="Status" selected-item="{{motherStatus}}" selected-item-label="{{selectedMotherStatus}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.mother.status, 'status', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('status', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="motherStatus" type="hidden" value$="[[motherStatus.value]]" />
    <br>

    <h4>Mother's Owner</h4>
    <paper-dropdown-menu label="Title" selected-item="{{motherOwnerTitle}}" selected-item-label="{{selectedMotherOwnerTitle}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.mother.owner.name.title, 'title', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('title', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="motherOwnerTitle" type="hidden" value$="[[motherOwnerTitle.value]]" />
    <paper-input name="motherOwnerFirstName" label="First Name" value="{{person.mother.owner.name.firstName}}"></paper-input>
    <paper-input name="motherOwnerLastName" label="Last Name" value="{{person.mother.owner.name.lastName}}"></paper-input>

    <paper-dropdown-menu label="Owner Vocation" selected-item="{{motherOwnerVocation}}" selected-item-label="{{selectedMotherOwnerVocation}}">
      <paper-listbox slot="dropdown-content" selected="[[__indexOf(person.mother.owner.vocation, 'ownerVocation', options)]]">
        <template is="dom-repeat" items="[[__getSortedOptions('ownerVocation', options)]]">
          <paper-item value="[[item]]">[[item]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <input name="motherOwnerVocation" type="hidden" value$="[[motherOwnerVocation.value]]" />

    <h3>Children</h3>
    <template is="dom-repeat" items="[[person.children]]">
      <paper-input name="childFirstName[]" label="First Name" value="{{item.name.firstName}}"></paper-input>
      <paper-input name="childLastName[]" label="Last Name" value="{{item.name.lastName}}"></paper-input>
      <paper-button on-click="removeChild" data-property="children" data-index="[[index]]" raised>Remove Child</paper-button>
    </template>
    <p><paper-button raised on-click="addChild">Add Child</paper-button></p>
    <br>

    <!-- this.vocation = "";
    this.stringLocation = "";
    this.colonyState = "";
    this.nationalContext = "";

    this.father = new Parent();
    this.mother = new Parent();
    this.children = []; -->

  </template>

  <script src="person-edit.js"></script>
</dom-module>
